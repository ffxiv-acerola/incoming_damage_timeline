# Activate uv environment
source .venv/bin/activate

# Source .env (FFLOGS_TOKEN goes here)
source .env

if command -v pre-commit >/dev/null 2>&1; then
	if [ -d .git ]; then
		HOOK_PATH=".git/hooks/pre-commit"
		if [ ! -f "$HOOK_PATH" ] || ! grep -q "pre-commit" "$HOOK_PATH" 2>/dev/null; then
			pre-commit install >/dev/null 2>&1 || echo "pre-commit: failed to install hook"
			pre-commit install --hook-type commit-msg >/dev/null 2>&1 || true
		fi
	fi
else
	echo "pre-commit not found; install it in the venv (e.g., 'pip install pre-commit')" >&2
fi
